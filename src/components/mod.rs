use self::dh6502_cpu::M6502;
use self::types::M6502AddrModes;
use self::types::M6502Instruction;
use self::types::M6502Opcodes;

pub mod bus;
pub mod dh2C02_ppu;
pub mod dh6502_cpu;
pub mod types;
pub mod mappers;

const BOTTOM_OF_RAM: u16 = 0x0000;
const TOP_OF_RAM: u16 = 0xFFFF;
const HIGH_BYTE: u16 = 0xFF00;
const LOW_BYTE: u16 = 0x00FF;
const TOP_BIT_THRESH: u16 = 0x80;

// 6502 lookup table
// for logging but may be left alone for now
const LOOKUP_TABLE: [M6502Instruction; 256] = [
    M6502Instruction("BRK", M6502::brk, M6502::imm, 7),
    M6502Instruction("ORA", M6502::ora, M6502::izx, 6),
    M6502Instruction("???", M6502::xxx, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 8),
    M6502Instruction("???", M6502::nop, M6502::imp, 3),
    M6502Instruction("ORA", M6502::ora, M6502::zp0, 3),
    M6502Instruction("ASL", M6502::asl, M6502::zp0, 5),
    M6502Instruction("???", M6502::xxx, M6502::imp, 5),
    M6502Instruction("PHP", M6502::php, M6502::imp, 3),
    M6502Instruction("ORA", M6502::ora, M6502::imm, 2),
    M6502Instruction("ASL", M6502::asl, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 2),
    M6502Instruction("???", M6502::nop, M6502::imp, 4),
    M6502Instruction("ORA", M6502::ora, M6502::abs, 4),
    M6502Instruction("ASL", M6502::asl, M6502::abs, 6),
    M6502Instruction("???", M6502::xxx, M6502::imp, 6),
    M6502Instruction("BPL", M6502::bpl, M6502::rel, 2),
    M6502Instruction("ORA", M6502::ora, M6502::izy, 5),
    M6502Instruction("???", M6502::xxx, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 8),
    M6502Instruction("???", M6502::nop, M6502::imp, 4),
    M6502Instruction("ORA", M6502::ora, M6502::zpx, 4),
    M6502Instruction("ASL", M6502::asl, M6502::zpx, 6),
    M6502Instruction("???", M6502::xxx, M6502::imp, 6),
    M6502Instruction("CLC", M6502::clc, M6502::imp, 2),
    M6502Instruction("ORA", M6502::ora, M6502::aby, 4),
    M6502Instruction("???", M6502::nop, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 7),
    M6502Instruction("???", M6502::nop, M6502::imp, 4),
    M6502Instruction("ORA", M6502::ora, M6502::abx, 4),
    M6502Instruction("ASL", M6502::asl, M6502::abx, 7),
    M6502Instruction("???", M6502::xxx, M6502::imp, 7),
    M6502Instruction("JSR", M6502::jsr, M6502::abs, 6),
    M6502Instruction("AND", M6502::and, M6502::izx, 6),
    M6502Instruction("???", M6502::xxx, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 8),
    M6502Instruction("BIT", M6502::bit, M6502::zp0, 3),
    M6502Instruction("AND", M6502::and, M6502::zp0, 3),
    M6502Instruction("ROL", M6502::rol, M6502::zp0, 5),
    M6502Instruction("???", M6502::xxx, M6502::imp, 5),
    M6502Instruction("PLP", M6502::plp, M6502::imp, 4),
    M6502Instruction("AND", M6502::and, M6502::imm, 2),
    M6502Instruction("ROL", M6502::rol, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 2),
    M6502Instruction("BIT", M6502::bit, M6502::abs, 4),
    M6502Instruction("AND", M6502::and, M6502::abs, 4),
    M6502Instruction("ROL", M6502::rol, M6502::abs, 6),
    M6502Instruction("???", M6502::xxx, M6502::imp, 6),
    M6502Instruction("BMI", M6502::bmi, M6502::rel, 2),
    M6502Instruction("AND", M6502::and, M6502::izy, 5),
    M6502Instruction("???", M6502::xxx, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 8),
    M6502Instruction("???", M6502::nop, M6502::imp, 4),
    M6502Instruction("AND", M6502::and, M6502::zpx, 4),
    M6502Instruction("ROL", M6502::rol, M6502::zpx, 6),
    M6502Instruction("???", M6502::xxx, M6502::imp, 6),
    M6502Instruction("SEC", M6502::sec, M6502::imp, 2),
    M6502Instruction("AND", M6502::and, M6502::aby, 4),
    M6502Instruction("???", M6502::nop, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 7),
    M6502Instruction("???", M6502::nop, M6502::imp, 4),
    M6502Instruction("AND", M6502::and, M6502::abx, 4),
    M6502Instruction("ROL", M6502::rol, M6502::abx, 7),
    M6502Instruction("???", M6502::xxx, M6502::imp, 7),
    M6502Instruction("RTI", M6502::rti, M6502::imp, 6),
    M6502Instruction("EOR", M6502::eor, M6502::izx, 6),
    M6502Instruction("???", M6502::xxx, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 8),
    M6502Instruction("???", M6502::nop, M6502::imp, 3),
    M6502Instruction("EOR", M6502::eor, M6502::zp0, 3),
    M6502Instruction("LSR", M6502::lsr, M6502::zp0, 5),
    M6502Instruction("???", M6502::xxx, M6502::imp, 5),
    M6502Instruction("PHA", M6502::pha, M6502::imp, 3),
    M6502Instruction("EOR", M6502::eor, M6502::imm, 2),
    M6502Instruction("LSR", M6502::lsr, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 2),
    M6502Instruction("JMP", M6502::jmp, M6502::abs, 3),
    M6502Instruction("EOR", M6502::eor, M6502::abs, 4),
    M6502Instruction("LSR", M6502::lsr, M6502::abs, 6),
    M6502Instruction("???", M6502::xxx, M6502::imp, 6),
    M6502Instruction("BVC", M6502::bvc, M6502::rel, 2),
    M6502Instruction("EOR", M6502::eor, M6502::izy, 5),
    M6502Instruction("???", M6502::xxx, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 8),
    M6502Instruction("???", M6502::nop, M6502::imp, 4),
    M6502Instruction("EOR", M6502::eor, M6502::zpx, 4),
    M6502Instruction("LSR", M6502::lsr, M6502::zpx, 6),
    M6502Instruction("???", M6502::xxx, M6502::imp, 6),
    M6502Instruction("CLI", M6502::cli, M6502::imp, 2),
    M6502Instruction("EOR", M6502::eor, M6502::aby, 4),
    M6502Instruction("???", M6502::nop, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 7),
    M6502Instruction("???", M6502::nop, M6502::imp, 4),
    M6502Instruction("EOR", M6502::eor, M6502::abx, 4),
    M6502Instruction("LSR", M6502::lsr, M6502::abx, 7),
    M6502Instruction("???", M6502::xxx, M6502::imp, 7),
    M6502Instruction("RTS", M6502::rts, M6502::imp, 6),
    M6502Instruction("ADC", M6502::adc, M6502::izx, 6),
    M6502Instruction("???", M6502::xxx, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 8),
    M6502Instruction("???", M6502::nop, M6502::imp, 3),
    M6502Instruction("ADC", M6502::adc, M6502::zp0, 3),
    M6502Instruction("ROR", M6502::ror, M6502::zp0, 5),
    M6502Instruction("???", M6502::xxx, M6502::imp, 5),
    M6502Instruction("PLA", M6502::pla, M6502::imp, 4),
    M6502Instruction("ADC", M6502::adc, M6502::imm, 2),
    M6502Instruction("ROR", M6502::ror, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 2),
    M6502Instruction("JMP", M6502::jmp, M6502::ind, 5),
    M6502Instruction("ADC", M6502::adc, M6502::abs, 4),
    M6502Instruction("ROR", M6502::ror, M6502::abs, 6),
    M6502Instruction("???", M6502::xxx, M6502::imp, 6),
    M6502Instruction("BVS", M6502::bvs, M6502::rel, 2),
    M6502Instruction("ADC", M6502::adc, M6502::izy, 5),
    M6502Instruction("???", M6502::xxx, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 8),
    M6502Instruction("???", M6502::nop, M6502::imp, 4),
    M6502Instruction("ADC", M6502::adc, M6502::zpx, 4),
    M6502Instruction("ROR", M6502::ror, M6502::zpx, 6),
    M6502Instruction("???", M6502::xxx, M6502::imp, 6),
    M6502Instruction("SEI", M6502::sei, M6502::imp, 2),
    M6502Instruction("ADC", M6502::adc, M6502::aby, 4),
    M6502Instruction("???", M6502::nop, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 7),
    M6502Instruction("???", M6502::nop, M6502::imp, 4),
    M6502Instruction("ADC", M6502::adc, M6502::abx, 4),
    M6502Instruction("ROR", M6502::ror, M6502::abx, 7),
    M6502Instruction("???", M6502::xxx, M6502::imp, 7),
    M6502Instruction("???", M6502::nop, M6502::imp, 2),
    M6502Instruction("STA", M6502::sta, M6502::izx, 6),
    M6502Instruction("???", M6502::nop, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 6),
    M6502Instruction("STY", M6502::sty, M6502::zp0, 3),
    M6502Instruction("STA", M6502::sta, M6502::zp0, 3),
    M6502Instruction("STX", M6502::stx, M6502::zp0, 3),
    M6502Instruction("???", M6502::xxx, M6502::imp, 3),
    M6502Instruction("DEY", M6502::dey, M6502::imp, 2),
    M6502Instruction("???", M6502::nop, M6502::imp, 2),
    M6502Instruction("TXA", M6502::txa, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 2),
    M6502Instruction("STY", M6502::sty, M6502::abs, 4),
    M6502Instruction("STA", M6502::sta, M6502::abs, 4),
    M6502Instruction("STX", M6502::stx, M6502::abs, 4),
    M6502Instruction("???", M6502::xxx, M6502::imp, 4),
    M6502Instruction("BCC", M6502::bcc, M6502::rel, 2),
    M6502Instruction("STA", M6502::sta, M6502::izy, 6),
    M6502Instruction("???", M6502::xxx, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 6),
    M6502Instruction("STY", M6502::sty, M6502::zpx, 4),
    M6502Instruction("STA", M6502::sta, M6502::zpx, 4),
    M6502Instruction("STX", M6502::stx, M6502::zpy, 4),
    M6502Instruction("???", M6502::xxx, M6502::imp, 4),
    M6502Instruction("TYA", M6502::tya, M6502::imp, 2),
    M6502Instruction("STA", M6502::sta, M6502::aby, 5),
    M6502Instruction("TXS", M6502::txs, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 5),
    M6502Instruction("???", M6502::nop, M6502::imp, 5),
    M6502Instruction("STA", M6502::sta, M6502::abx, 5),
    M6502Instruction("???", M6502::xxx, M6502::imp, 5),
    M6502Instruction("???", M6502::xxx, M6502::imp, 5),
    M6502Instruction("LDY", M6502::ldy, M6502::imm, 2),
    M6502Instruction("LDA", M6502::lda, M6502::izx, 6),
    M6502Instruction("LDX", M6502::ldx, M6502::imm, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 6),
    M6502Instruction("LDY", M6502::ldy, M6502::zp0, 3),
    M6502Instruction("LDA", M6502::lda, M6502::zp0, 3),
    M6502Instruction("LDX", M6502::ldx, M6502::zp0, 3),
    M6502Instruction("???", M6502::xxx, M6502::imp, 3),
    M6502Instruction("TAY", M6502::tay, M6502::imp, 2),
    M6502Instruction("LDA", M6502::lda, M6502::imm, 2),
    M6502Instruction("TAX", M6502::tax, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 2),
    M6502Instruction("LDY", M6502::ldy, M6502::abs, 4),
    M6502Instruction("LDA", M6502::lda, M6502::abs, 4),
    M6502Instruction("LDX", M6502::ldx, M6502::abs, 4),
    M6502Instruction("???", M6502::xxx, M6502::imp, 4),
    M6502Instruction("BCS", M6502::bcs, M6502::rel, 2),
    M6502Instruction("LDA", M6502::lda, M6502::izy, 5),
    M6502Instruction("???", M6502::xxx, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 5),
    M6502Instruction("LDY", M6502::ldy, M6502::zpx, 4),
    M6502Instruction("LDA", M6502::lda, M6502::zpx, 4),
    M6502Instruction("LDX", M6502::ldx, M6502::zpy, 4),
    M6502Instruction("???", M6502::xxx, M6502::imp, 4),
    M6502Instruction("CLV", M6502::clv, M6502::imp, 2),
    M6502Instruction("LDA", M6502::lda, M6502::aby, 4),
    M6502Instruction("TSX", M6502::tsx, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 4),
    M6502Instruction("LDY", M6502::ldy, M6502::abx, 4),
    M6502Instruction("LDA", M6502::lda, M6502::abx, 4),
    M6502Instruction("LDX", M6502::ldx, M6502::aby, 4),
    M6502Instruction("???", M6502::xxx, M6502::imp, 4),
    M6502Instruction("CPY", M6502::cpy, M6502::imm, 2),
    M6502Instruction("CMP", M6502::cmp, M6502::izx, 6),
    M6502Instruction("???", M6502::nop, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 8),
    M6502Instruction("CPY", M6502::cpy, M6502::zp0, 3),
    M6502Instruction("CMP", M6502::cmp, M6502::zp0, 3),
    M6502Instruction("DEC", M6502::dec, M6502::zp0, 5),
    M6502Instruction("???", M6502::xxx, M6502::imp, 5),
    M6502Instruction("INY", M6502::iny, M6502::imp, 2),
    M6502Instruction("CMP", M6502::cmp, M6502::imm, 2),
    M6502Instruction("DEX", M6502::dex, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 2),
    M6502Instruction("CPY", M6502::cpy, M6502::abs, 4),
    M6502Instruction("CMP", M6502::cmp, M6502::abs, 4),
    M6502Instruction("DEC", M6502::dec, M6502::abs, 6),
    M6502Instruction("???", M6502::xxx, M6502::imp, 6),
    M6502Instruction("BNE", M6502::bne, M6502::rel, 2),
    M6502Instruction("CMP", M6502::cmp, M6502::izy, 5),
    M6502Instruction("???", M6502::xxx, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 8),
    M6502Instruction("???", M6502::nop, M6502::imp, 4),
    M6502Instruction("CMP", M6502::cmp, M6502::zpx, 4),
    M6502Instruction("DEC", M6502::dec, M6502::zpx, 6),
    M6502Instruction("???", M6502::xxx, M6502::imp, 6),
    M6502Instruction("CLD", M6502::cld, M6502::imp, 2),
    M6502Instruction("CMP", M6502::cmp, M6502::aby, 4),
    M6502Instruction("NOP", M6502::nop, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 7),
    M6502Instruction("???", M6502::nop, M6502::imp, 4),
    M6502Instruction("CMP", M6502::cmp, M6502::abx, 4),
    M6502Instruction("DEC", M6502::dec, M6502::abx, 7),
    M6502Instruction("???", M6502::xxx, M6502::imp, 7),
    M6502Instruction("CPX", M6502::cpx, M6502::imm, 2),
    M6502Instruction("SBC", M6502::sbc, M6502::izx, 6),
    M6502Instruction("???", M6502::nop, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 8),
    M6502Instruction("CPX", M6502::cpx, M6502::zp0, 3),
    M6502Instruction("SBC", M6502::sbc, M6502::zp0, 3),
    M6502Instruction("INC", M6502::inc, M6502::zp0, 5),
    M6502Instruction("???", M6502::xxx, M6502::imp, 5),
    M6502Instruction("INX", M6502::inx, M6502::imp, 2),
    M6502Instruction("SBC", M6502::sbc, M6502::imm, 2),
    M6502Instruction("NOP", M6502::nop, M6502::imp, 2),
    M6502Instruction("???", M6502::sbc, M6502::imp, 2),
    M6502Instruction("CPX", M6502::cpx, M6502::abs, 4),
    M6502Instruction("SBC", M6502::sbc, M6502::abs, 4),
    M6502Instruction("INC", M6502::inc, M6502::abs, 6),
    M6502Instruction("???", M6502::xxx, M6502::imp, 6),
    M6502Instruction("BEQ", M6502::beq, M6502::rel, 2),
    M6502Instruction("SBC", M6502::sbc, M6502::izy, 5),
    M6502Instruction("???", M6502::xxx, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 8),
    M6502Instruction("???", M6502::nop, M6502::imp, 4),
    M6502Instruction("SBC", M6502::sbc, M6502::zpx, 4),
    M6502Instruction("INC", M6502::inc, M6502::zpx, 6),
    M6502Instruction("???", M6502::xxx, M6502::imp, 6),
    M6502Instruction("SED", M6502::sed, M6502::imp, 2),
    M6502Instruction("SBC", M6502::sbc, M6502::aby, 4),
    M6502Instruction("NOP", M6502::nop, M6502::imp, 2),
    M6502Instruction("???", M6502::xxx, M6502::imp, 7),
    M6502Instruction("???", M6502::nop, M6502::imp, 4),
    M6502Instruction("SBC", M6502::sbc, M6502::abx, 4),
    M6502Instruction("INC", M6502::inc, M6502::abx, 7),
    M6502Instruction("???", M6502::xxx, M6502::imp, 7),
];
